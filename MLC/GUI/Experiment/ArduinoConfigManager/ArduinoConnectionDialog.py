import os

from PyQt5.QtWidgets import QDialog
from PyQt5.QtGui import QMovie
from PyQt5.QtGui import QPixmap
from MLC.GUI.Autogenerated.autogenerated import Ui_ArduinoConnectionDialog


class ArduinoConnectionDialog(QDialog):

    def __init__(self, parent=None):
        super(ArduinoConnectionDialog, self).__init__(parent)
        self.ui = Ui_ArduinoConnectionDialog()
        self.ui.setupUi(self)
        #self.ui.widget.setStyleSheet("image: url(images/connection.gif);")
        def create_file_full_path(filename):
            path_list = [os.path.dirname(os.path.abspath(__file__)), "images", filename]
            return os.path.join(*path_list)

        self.__ok_tick = QPixmap()
        self.__ok_tick.load(create_file_full_path("ok_b.png"))
        self.__ok_tick = self.__ok_tick.scaled(100, 100)
        self.__error_tick = QPixmap()
        self.__error_tick.load(create_file_full_path("error.png"))
        self.__error_tickt = self.__error_tick.scaled(100, 100)
        self.__movie = QMovie()
        self.__movie.setFileName(create_file_full_path("connection.gif"))
        # self.ui.loadingPanel.setMovie(self.movie)
        self.set_ok()
        self.__movie.start()
        self.resize(150, 150)

    def set_ok(self):
        self.ui.loadingPanel.setPixmap(self.__ok_tick)

    def set_error(self):
        self.ui.loadingPanel.setPixmap(self.__error_tick)
